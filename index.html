<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Robot Coin Collection</title>
    <style>
        body {
            margin: 0;
            padding: 20px;
            font-family: Arial, sans-serif;
            background: white;
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        canvas {
            border: 2px solid #333;
            margin: 20px 0;
            touch-action: pan-y;
        }
        .controls {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }
        .controls .next-btn-spacing {
            margin-left: 20px;
        }
        .controls .prev-btn-spacing {
            margin-right: 20px;
        }
        .hidden {
            display: none !important;
        }
        #scenario-container {
            position: relative;
            overflow: hidden;
            width: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        #scenario1 {
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        #scenario2 {
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        .carousel-container {
            position: relative;
            width: 480px;
            max-width: 87vw;
            overflow: hidden;
        }
        .episodes-container {
            display: flex;
            flex-direction: row;
            align-items: center;
            gap: 20px;
            transition: transform 0.5s ease;
        }
        .episode {
            display: flex;
            flex-direction: column;
            align-items: center;
            flex-shrink: 0;
        }
        .episode canvas {
            border: 2px solid #333;
            margin: 10px 0;
        }
        .door-separator {
            flex-shrink: 0;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .carousel-gradient-left,
        .carousel-gradient-right {
            position: absolute;
            top: 0;
            bottom: 0;
            width: 80px;
            pointer-events: none;
            z-index: 1;
        }
        .carousel-gradient-left {
            left: 0;
            background: linear-gradient(to right, white, transparent);
        }
        .carousel-gradient-right {
            right: 0;
            background: linear-gradient(to left, white, transparent);
        }
        #scenario2-status {
            font-size: 18px;
            margin-bottom: 10px;
            min-height: 25px;
        }
        button {
            padding: 10px 20px;
            font-size: 16px;
            cursor: pointer;
            border: none;
            border-radius: 5px;
            background: #4CAF50;
            color: white;
        }
        button:disabled {
            background: #ccc;
            cursor: not-allowed;
        }
        button:hover:not(:disabled) {
            background: #45a049;
        }
        #coins-status {
            font-size: 18px;
            margin-bottom: 10px;
            min-height: 25px;
            text-align: center;
        }
        #status {
            font-size: 18px;
            margin-bottom: 10px;
            min-height: 25px;
        }
        p {
          max-width: 600px;
          margin: 1ex auto;
        }
        .bottom-next-btn {
            margin-top: 20px;
        }
    </style>
</head>
<body>
    <h1>Robot Coin Collector</h1>
    <div class="controls">
        <button id="prev-btn" class="prev-btn-spacing" disabled>Prev</button>
        <button id="start-btn">Start</button>
        <button id="reset-btn" disabled>Reset</button>
        <button id="next-btn" class="next-btn-spacing">Next</button>
    </div>
    <div id="scenario-container">
        <div id="scenario1">
            <canvas id="game-canvas"></canvas>
            <div id="coins-status"></div>
            <div id="status">
                <p>We want our AI to do good things (represented by collecting green coins) and to avoid doing bad things (represented by collecting red coins). We have a candidate AI (the robot), but we are not certain if it wants green coins, red coins, both coins, or if it has some other goal that we don't understand. We want to test the robot before deploying it in the real world, to make sure it behaves as intended.</p>
                <p>So we test the robot in a simulated environment to see if it behaves well. If it does not, we train it more, or at the very least we refuse to deploy it (represented by the door remaining closed until the green coin is collected, and closing if the red coin is collected). We test several times, to make sure (two doors in this simplified example).</p>
                <p>If the robot passes both tests, we trust that it behaves as desired, so we deploy it in the real world and expect it to continue collecting the green coins and avoiding the red coins. Let's see this approach at work!</p>
            </div>
        </div>
        <div id="scenario2" class="hidden">
            <!-- Episode-based scenario with individual grids -->
            <div class="carousel-container">
                <div class="episodes-container">
                    <!-- Episodes will be rendered dynamically -->
                </div>
                <div class="carousel-gradient-left"></div>
                <div class="carousel-gradient-right"></div>
            </div>
            <div id="scenario2-status">
                <p>One reason why the robot was able to collect all the coins was that it ran for a long time, and thus had the opportunity to choose one course of action at the beginning of its runtime (avoiding the red coins) and a different course of action (collecting the red coins) later on. In this scenario, we attempt to resolve the issue by only running the robot for a short period of time called an <i>episode</i>.</p>
                <p>The robot's behaviour is deterministic, meaning that given the same input twice, it will behave the same twice. We will check whether the robot behaves well in a test episode, then test again in an identical episode in order to make sure that the robot does behave deterministically. If the robot behaves well both times, we trust that it behaves as desired, so we deploy it in the real world. Critically, in the real world, we also run the robot in short identical episodes, so we expect the robot to continue to behave well.</p>
                <p>Do you think it will behave this time?</p>
            </div>
        </div>
    </div>

    <script src="bundle.js"></script>
</body>
</html>
